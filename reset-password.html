<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reset Password - Novuna Electronics</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
            min-height: 100vh; 
            display: flex; 
            flex-direction: column;
            align-items: center; 
            justify-content: center; 
            padding: 20px;
        }
        #header { 
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            padding: 15px 40px; 
            background: #fff; 
            box-shadow: 0 2px 10px rgba(0,0,0,0.1); 
            z-index: 100;
        }
        #header .logo { height: 45px; }
        .reset-container { 
            max-width: 500px; 
            width: 100%; 
            background: white; 
            border-radius: 20px; 
            box-shadow: 0 20px 60px rgba(0,0,0,0.3); 
            overflow: hidden; 
            margin-top: 80px;
        }
        .reset-header { 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
            padding: 50px 30px 40px; 
            text-align: center; 
            color: white; 
        }
        .reset-header i { 
            font-size: 48px; 
            margin-bottom: 15px; 
            display: block;
            opacity: 0.9;
        }
        .reset-header h3 { 
            font-size: 32px; 
            margin-bottom: 10px; 
            font-weight: 700; 
        }
        .reset-header p { 
            font-size: 15px; 
            opacity: 0.95; 
            line-height: 1.5;
        }
        .reset-form { 
            padding: 45px 40px; 
        }
        .info-box { 
            background: #f0f4ff; 
            border-left: 5px solid #667eea; 
            padding: 15px; 
            border-radius: 8px; 
            margin-bottom: 30px; 
            font-size: 13px; 
            color: #555; 
            line-height: 1.6;
        }
        .form-group { 
            margin-bottom: 25px; 
        }
        .form-group label { 
            display: block; 
            margin-bottom: 10px; 
            font-weight: 600; 
            color: #333; 
            font-size: 14px; 
        }
        .form-group input { 
            width: 100%; 
            padding: 14px 15px; 
            border: 2px solid #e0e0e0; 
            border-radius: 10px; 
            box-sizing: border-box; 
            font-size: 15px; 
            transition: all 0.3s ease; 
            font-family: inherit;
        }
        .form-group input:focus { 
            outline: none; 
            border-color: #667eea; 
            box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.1); 
            background: #fafbff;
        }
        .form-group input::placeholder {
            color: #999;
        }
        .password-strength {
            display: none;
            margin-top: 8px;
            font-size: 12px;
            padding: 8px;
            border-radius: 6px;
            text-align: center;
        }
        .password-strength.weak {
            background: #fee2e2;
            color: #dc2626;
            display: block;
        }
        .password-strength.medium {
            background: #fef3c7;
            color: #d97706;
            display: block;
        }
        .password-strength.strong {
            background: #dcfce7;
            color: #16a34a;
            display: block;
        }
        .submit-btn { 
            width: 100%; 
            padding: 16px; 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
            color: white; 
            border: none; 
            border-radius: 10px; 
            cursor: pointer; 
            font-weight: 700; 
            font-size: 16px; 
            transition: all 0.3s ease; 
            margin-top: 10px;
        }
        .submit-btn:hover { 
            transform: translateY(-3px); 
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4); 
        }
        .submit-btn:active {
            transform: translateY(-1px);
        }
        .submit-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }
        .back-link { 
            text-align: center; 
            margin-top: 25px; 
            padding-top: 25px;
            border-top: 1px solid #e0e0e0;
        }
        .back-link a { 
            color: #667eea; 
            text-decoration: none; 
            font-weight: 600; 
            transition: color 0.3s; 
            font-size: 15px;
        }
        .back-link a:hover { 
            color: #764ba2; 
        }
        .success-message { 
            display: none; 
            text-align: center; 
            color: #10B981; 
            font-weight: 600; 
            margin-top: 15px; 
            padding: 15px;
            background: #ecfdf5;
            border-radius: 8px;
            font-size: 15px;
        }
        .error-message { 
            display: none; 
            text-align: center; 
            color: #EF4444; 
            font-weight: 600; 
            margin-top: 15px; 
            font-size: 14px; 
            padding: 15px;
            background: #fee2e2;
            border-radius: 8px;
        }
        @media (max-width: 768px) { 
            #header { 
                padding: 15px 20px; 
            } 
            .reset-header { 
                padding: 40px 20px 30px; 
            } 
            .reset-header h3 {
                font-size: 26px;
            }
            .reset-header i {
                font-size: 40px;
            }
            .reset-form { 
                padding: 30px 20px; 
            }
            .reset-container {
                margin-top: 70px;
            }
        }
    </style>
</head>
<body>
    <section id="header">
        <a class="active" href="index.html"><img src="img4.png" class="logo" alt="Novuna Electronics"></a>
    </section>


    <div class="reset-container">
        <div class="reset-header">
            <i class="fas fa-lock"></i>
            <h3>Reset Password</h3>
            <p>Create a new password for your account</p>
        </div>

        <div class="reset-form">
            <div class="info-box">
                <i class="fas fa-info-circle" style="margin-right: 8px;"></i>
                Enter your email and reset code to create a new password. Check your email for the reset code.
            </div>
            
            <form id="resetPasswordForm">
                <div class="form-group">
                    <label for="email">
                        <i class="fas fa-envelope" style="margin-right: 8px; color: #667eea;"></i>Email Address
                    </label>
                    <input type="email" id="email" name="email" required placeholder="Enter your registered email" autocomplete="email">
                </div>

                <div class="form-group">
                    <label for="resetCode">
                        <i class="fas fa-key" style="margin-right: 8px; color: #667eea;"></i>Reset Code
                    </label>
                    <input type="text" id="resetCode" name="resetCode" required placeholder="Enter the 6-digit code from your email" maxlength="6" autocomplete="off">
                </div>

                <div class="form-group">
                    <label for="newPassword">
                        <i class="fas fa-lock" style="margin-right: 8px; color: #667eea;"></i>New Password
                    </label>
                    <input type="password" id="newPassword" name="newPassword" required placeholder="Enter new password (min 8 characters)" minlength="8" autocomplete="new-password">
                    <div class="password-strength" id="strength-indicator"></div>
                </div>

                <div class="form-group">
                    <label for="confirmPassword">
                        <i class="fas fa-lock" style="margin-right: 8px; color: #667eea;"></i>Confirm Password
                    </label>
                    <input type="password" id="confirmPassword" name="confirmPassword" required placeholder="Confirm your new password" minlength="8" autocomplete="new-password">
                </div>

                <button type="submit" class="submit-btn" id="resetBtn">
                    <i class="fas fa-check" style="margin-right: 8px;"></i>Reset Password
                </button>

                <div class="success-message" id="successMsg">
                    <i class="fas fa-check-circle" style="margin-right: 8px;"></i>Password reset successfully! Redirecting to login...
                </div>
                <div class="error-message" id="errorMsg"></div>
            </form>

            <div class="back-link">
                <a href="login.html">
                    <i class="fas fa-arrow-left" style="margin-right: 8px;"></i>Back to Login
                </a>
            </div>
        </div>
    </div>


    <script>
        // Password strength indicator
        const newPasswordInput = document.getElementById('newPassword');
        const strengthIndicator = document.getElementById('strength-indicator');
        
        newPasswordInput.addEventListener('input', function() {
            const password = this.value;
            let strength = 'weak';
            
            if (password.length >= 8 && /[A-Z]/.test(password) && /[0-9]/.test(password)) {
                strength = 'strong';
            } else if (password.length >= 8) {
                strength = 'medium';
            }
            
            if (password.length === 0) {
                strengthIndicator.style.display = 'none';
            } else {
                strengthIndicator.className = `password-strength ${strength}`;
                strengthIndicator.innerHTML = 
                    strength === 'strong' ? '<i class="fas fa-shield-alt"></i> Strong password' :
                    strength === 'medium' ? '<i class="fas fa-exclamation-triangle"></i> Medium strength' :
                    '<i class="fas fa-exclamation-circle"></i> Weak password';
            }
        });

        // Form submission
        document.getElementById('resetPasswordForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const email = document.getElementById('email').value.trim();
            const resetCode = document.getElementById('resetCode').value.trim();
            const newPassword = document.getElementById('newPassword').value;
            const confirmPassword = document.getElementById('confirmPassword').value;
            const errorMsg = document.getElementById('errorMsg');
            const successMsg = document.getElementById('successMsg');
            const resetBtn = document.getElementById('resetBtn');

            // Clear messages
            errorMsg.style.display = 'none';
            successMsg.style.display = 'none';

            // Validation
            if (!email || !email.includes('@')) {
                errorMsg.textContent = '❌ Please enter a valid email address';
                errorMsg.style.display = 'block';
                return;
            }

            if (!resetCode || resetCode.length < 4) {
                errorMsg.textContent = '❌ Please enter a valid reset code';
                errorMsg.style.display = 'block';
                return;
            }

            if (newPassword.length < 8) {
                errorMsg.textContent = '❌ Password must be at least 8 characters long';
                errorMsg.style.display = 'block';
                return;
            }

            if (newPassword !== confirmPassword) {
                errorMsg.textContent = '❌ Passwords do not match';
                errorMsg.style.display = 'block';
                return;
            }

            // Simulate password reset
            resetBtn.disabled = true;
            resetBtn.textContent = 'Resetting...';

            setTimeout(() => {
                // Retrieve users from localStorage
                let users = JSON.parse(localStorage.getItem('users') || '[]');
                
                // Find user with matching email
                const userIndex = users.findIndex(u => u.email === email);
                
                if (userIndex === -1) {
                    errorMsg.textContent = '❌ User with this email not found. Please check and try again.';
                    errorMsg.style.display = 'block';
                    resetBtn.disabled = false;
                    resetBtn.textContent = 'Reset Password';
                } else {
                    // Update password
                    users[userIndex].password = newPassword;
                    localStorage.setItem('users', JSON.stringify(users));

                    // Show success message
                    successMsg.style.display = 'block';
                    document.getElementById('resetPasswordForm').style.opacity = '0.5';

                    // Redirect to login after 2 seconds
                    setTimeout(() => {
                        window.location.href = 'login.html';
                    }, 2000);
                }
            }, 1500);
        });
    </script>
</body>
</html>
